<!DOCTYPE html>
<html>

<head>
  <!-- Searvh Console -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1145880808347586"
    crossorigin="anonymous"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-N7FD0VTLNH"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-N7FD0VTLNH');
  </script>
  <meta charset="utf-8">
  <meta content="ヘブンバーンズレッドのダメージ計算ツールです。" name="description">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@RELI_hevburn" />
  <meta name="twitter:title" content="ヘブバン ダメージ計算ツール" />
  <meta name="twitter:description" content="ヘブンバーンズレッドのダメージ計算ツールです。" />
  <meta name="twitter:image" content="https://www.hbr-tool.com/img/summary_card.png" />
  <title>ヘブバン ダメージ計算ツール</title>
  <link rel="stylesheet" href="css/header.css">
  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" href="css/modal.css">
  <link rel="stylesheet" href="css/micromodal.css">
  <link rel="stylesheet" href="css/damege.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <script src="js/micromodal/micromodal.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@hello-pangea/dnd@17.0.0/dist/dnd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-modal/3.16.3/react-modal.min.js"
    integrity="sha512-wEXWOhy18Z5jma0v5C67KJJ9g5qh7069+o7eLtWCuzOvJMcpVa3r5vODBzgId6RE0zmz7CsgHKnjsRMczzb5hA=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="js/damege.js"></script>
  <script type="text/babel" src="js/component/DamageCalculation.js"></script>
  <script type="text/babel" src="js/component/StyleIcon.js"></script>
  <script type="text/babel" src="js/component/ModalStyleSelection.js"></script>
  <script type="text/babel" src="js/component/damage/AbilityCheckbox.js"></script>
  <script type="text/babel" src="js/component/damage/AttackList.js"></script>
  <script type="text/babel" src="js/component/damage/BuffArea.js"></script>
  <script type="text/babel" src="js/component/damage/BuffSelect.js"></script>
  <script type="text/babel" src="js/component/damage/CharaStatus.js"></script>
  <script type="text/babel" src="js/component/damage/ContentsArea.js"></script>
  <script type="text/babel" src="js/component/damage/EnemyArea.js"></script>
  <script type="text/babel" src="js/component/damage/OtherSetting.js"></script>
  <script type="text/babel" src="js/component/damage/ScoreSetting.js"></script>
  <script type="text/babel" src="js/component/damage/PassiveCheckbox.js"></script>
  <script type="text/babel" src="js/component/damage/bike_parts.js"></script>
  <script type="text/babel" src="js/component/damage/hard_layer.js"></script>
  <script type="text/babel" src="js/component/damage/PredictionScore.js"></script>
  <script type="text/babel" src="js/component/damage/seraph_card_list.js"></script>
  <script type="text/babel" src="js/component/enemy_list.js"></script>
  <script src="js/header.js"></script>
  <script src="js/common.js"></script>
  <script src="js/const.js"></script>
  <script src="js/chara_data.js"></script>
  <script src="js/chara_style.js"></script>
  <script src="js/modal.js"></script>
  <script src="js/skill_list.js"></script>
  <script src="js/skill_attack.js"></script>
  <script src="js/skill_buff.js"></script>
  <script src="js/skill_passive.js"></script>
  <script src="js/ability.js"></script>
  <script src="js/enemy.js"></script>
  <script src="js/grade.js"></script>
  <script src="js/bonus.js"></script>
  <script src="js/score_data.js"></script>
  <script>
    var chara_no = -1;
    var select_attack_skill;
    var open_damage_detail;
    const buff_kbn = {
      0: "power_up",
      1: "element_up",
      2: "mindeye",
      3: "defense_down",
      4: "element_down",
      5: "fragile",
      6: "critical_up",
      7: "critical_damege",
      8: "critical_element",
      9: "critical_damege_element",
      10: "charge",
      11: "element_field",
      12: "destruction_rete_up",
      14: "fightingspirit",
      15: "misfortune",
      16: "funnel",
      18: "strong_break",
      19: "dp_defense_down",
      20: "resist_down",
      21: "permanent_defense_down",
      22: "permanent_element_down",
      39: "servant"
    };
    const DP_GAUGE_COUNT = 4;
    $(function () {
      // 自由入力取得
      for (let i = 0; i < 10; i++) {
        let free_enemy = localStorage.getItem("free_enemy_" + i);
        if (free_enemy !== null) {
          updateEnemyStatus(i, JSON.parse(free_enemy));
        }
      }

      // イベント設定
      setEventTrigger();

      // MicroModal初期化
      MicroModal.init({
        disableScroll: true,
      });
    });
    // ロード完了後に表示
    $(window).on("load", function () {
      $("div.frame").css("visibility", "visible");
    });
  </script>
</head>

<body>
  <main>
    <div class="header"></div>
    <div class="frame w-screen pt-3 overflow-y-scroll border-b" style="visibility: hidden;">
      <div id="root"></div>
      <div id="status_area"></div>
    </div>
    <div class="footer hidden">
      <div id="damage_result" class="text-center mx-auto">
        <div class="flex">
          <div class="mt-2 damage-flex">
            <div>
              <label class="damage_label">クリティカル</label><label id="critical_rate" class="damage_label"></label>
            </div>
            <div>
              <label class="damage_label">最終破壊率</label><label id="critical_destruction_last_rate"
                class="damage_label"></label>
              <input type="button" id="modal_damage_detail_open1" class="open_detail"
                data-micromodal-trigger="modal_damage_detail" value="詳細">
            </div>
            <div class="text-center mx-auto">
              <input type="text" id="critical_damage" class="text-center damage" readonly>
              <div class="leading-4 items-end">
                <label class="pb-0.5">(</label>
                <input type="text" id="critical_damage_min" class="text-center min_damage" readonly>
                <label class="pb-0.5">～</label>
                <input type="text" id="critical_damage_max" class="text-center min_damage" readonly>
                <label class="pb-0.5">)</label>
              </div>
            </div>
          </div>
          <div class="mt-2 damage-flex">
            <div>
              <label class="damage_label">通常ダメージ</label>
            </div>
            <div>
              <label class="damage_label">最終破壊率</label><label id="destruction_last_rate" class="damage_label"></label>
              <input type="button" id="modal_damage_detail_open2" class="open_detail"
                data-micromodal-trigger="modal_damage_detail" value="詳細">
            </div>
            <div class="text-center mx-auto">
              <input type="text" id="damage" class="text-center damage" readonly>
              <div class="leading-4 items-end">
                <label class="pb-0.5">(</label>
                <input type="text" id="damage_min" class="text-center min_damage" readonly>
                <label class="pb-0.5">～</label>
                <input type="text" id="damage_max" class="text-center min_damage" readonly>
                <label class="pb-0.5">)</label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal micromodal-slide" id="modal_damage_detail" aria-hidden="true">
      <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container container_damage" role="dialog" aria-modal="true" aria-labelledby="damage_detail">
          <div id="damage_detail" aria-hidden="true" class="modal text-left w-[250px] mx-auto mt-2">
            <div>
              <label class="damage_label">ダメージ詳細</label>
            </div>
            <div class="text-center mx-auto">
              <input type="text" id="detail_damage" class="text-center damage" readonly>
              <div>
                最大
                <input type="text" id="detail_max_damage" class="text-center min_damage" readonly>
              </div>
              <div>
                最小
                <input type="text" id="detail_min_damage" class="text-center min_damage" readonly>
              </div>
              <label class="detail_max_damage">最終破壊率</label>
              <label id="detail_destruction_last_rate" class="damage_label"></label>
            </div>
            <div class="enemy_rest_hp text-center w-[240px] mx-auto">
              <div class="flex">
                <div class="w-8">DP</div>
                <div>
                  <div class="dp_gauge">
                    <output id="rest_dp_rate_3" class="rest_gauge_rate">0%</output>
                  </div>
                  <div class="dp_gauge">
                    <output id="rest_dp_rate_2" class="rest_gauge_rate">0%</output>
                  </div>
                  <div class="dp_gauge">
                    <output id="rest_dp_rate_1" class="rest_gauge_rate">0%</output>
                  </div>
                  <div class="dp_gauge">
                    <output id="rest_dp_rate_0" class="rest_gauge_rate">0%</output>
                  </div>
                </div>
              </div>
              <div class="flex">
                <div class="w-8">HP</div>
                <div>
                  <div class="flex">
                    <output id="rest_hp_rate" class="rest_gauge_rate">0%</output>
                  </div>
                </div>
              </div>
              <input type="button" class="durability_reflection" value="敵情報に反映">
            </div>
            <div class="w-[250px] mx-auto mt-3">
              <div class="font-bold">補正詳細(初段Hit時点)</div>
              <div>
                <div class="magnification">スキル攻撃力</div>
                <input type="text" id="skill_power" class="text-center magnification_value" readonly>
                <input type="text" id="skill_power_critical" class="text-center magnification_value" readonly>
              </div>
              <div>
                <div class="magnification">×攻撃力アップ</div>
                <input type="text" id="mag_buff" class="text-center magnification_value" readonly>
              </div>
              <div>
                <div class="magnification">×防御力ダウン</div>
                <input type="text" id="mag_debuff" class="text-center magnification_value" readonly>
              </div>
              <div>
                <div class="magnification">×属性フィールド</div>
                <input type="text" id="mag_element_field" class="text-center magnification_value" readonly>
              </div>
              <div>
                <div class="magnification">×HP/DP特攻</div>
                <input type="text" id="mag_special" class="text-center magnification_value" readonly>
              </div>
              <div>
                <div class="magnification">×連撃</div>
                <input type="text" id="mag_funnel" class="text-center magnification_value" readonly>
              </div>
              <div>
                <div class="magnification">×トークン補正</div>
                <input type="text" id="mag_token" class="text-center magnification_value" readonly>
              </div>
              <div>
                <div class="magnification">×武器相性</div>
                <input type="text" id="mag_physical" class="text-center magnification_value" readonly>
              </div>
              <div>
                <div class="magnification">×属性相性</div>
                <input type="text" id="mag_element" class="text-center magnification_value" readonly>
              </div>
              <div>
                <div class="magnification">×心眼</div>
                <input type="text" id="mag_mindeye" class="text-center magnification_value" readonly>
              </div>
              <div>
                <div class="magnification">×脆弱</div>
                <input type="text" id="mag_fragile" class="text-center magnification_value" readonly>
              </div>
              <div>
                <div class="magnification">×破壊率</div>
                <input type="text" id="mag_destruction" class="text-center magnification_value" readonly>
              </div>
              <div id="magnification_critical">
                <div class="magnification">×クリティカル倍率</div>
                <input type="text" id="mag_critical" class="text-center magnification_value" readonly>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="modal micromodal-slide" id="modal_select_buff" aria-hidden="true">
      <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container container_multi_buff" role="dialog" aria-modal="true"
          aria-labelledby="select_buff">
          <div class="multi_inner_headline">
            <div class="buff_container">
              <div class="mx-auto">一括設定</div>
              <input type="button" id="bulk_buff_setting" href="javascript:void(0)" class="text-center" value="設定">
            </div>
          </div>
          <div class="text-xs">
            ※複数設定不可のスキルは複数反映されません。
          </div>
          <div>
            <input type="checkbox" id="orb_buff"><label for="orb_buff" class="checkbox01">オーブスキルを表示する</label>
          </div>
          <div id="select_buff" aria-hidden="true" class="modal text-left w-[300px] mx-auto">
          </div>
        </div>
      </div>
    </div>
  </main>
</body>

</html>